<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>html5 engine</title>
	</head>
	<style rel="stylesheet" type="text/css">
	    body{
	    	margin: 0;
	    }
		@media screen and (min-width:800px){
			#box{
				
			}
		}
		@media screen and (max-width:800px){
			#box{
				
			}
		}
	</style>
	<body>
		<div id="msg"></div>
		<canvas id="box" width="980" height="1739">

		</canvas>
	</body>
	<script type="text/javascript" src="jquery1x.js"></script>
	<script type="text/javascript" src="jquery.indexeddb.js"></script>
	<script type="text/javascript" src="genetic.js"></script>
	<script type="text/javascript">
		
		String.prototype.populate = function populate(params) {
			var str = this.replace(/\{\w+\w}/g, params["name"]);
			return str;
		};
		console.log("hello {name}".populate({name:"!!!"}));
		//-------------------------------------------------------
		Function.prototype.createInterceptor = function createInterceptor(fn){
			var my = this;
			var scope = {};
			return function(){
				if(fn.apply(scope,arguments)){
					return my.apply(scope,arguments);
				}else{
					return null;
				}
			};
		};
		
		var interceptMe = function cube(x){
			console.info(x);
			return Math.pow(x,3);
		};
		var cube = interceptMe.createInterceptor(function (x){
			return typeof x === "number";
		});
		
		console.log(cube(2));                                                                                                                                                
		//----------------------call-------------------
		var f = function (fn){
			var b = {a:4};
			return fn.call(b,10);
		};
		var a = f(function(x){
			console.log(this);
			if(this.a){
				return x*(this.a);
			}else{
				return x*2;
			}
		});    
		console.log(a);
		//-----------------------apply-------------------------
		
	</script>
</html>
